## Canvas 基本介绍
+ 是由 HTML 代码配合高度和宽度属性而定义出的可绘制区域。JavaScript 代码可以访问该区域，类似于其他通用的二维 API，通过一套完整的绘图函数来动态生成图形。


## Canvas基本使用
``` 
<canvas id="tutorial" width="300" height="300"></canvas>
```
+ canvas默认有跟img标签一样,只是只有两个可选属性height/width,而没有src/alt属性
+ 当如果不给canvas设置宽度和高度的时候,默认width:300 height:150,单位都是px.
+ 也可以使用css给canvas设置宽度,但是如果宽高属性和初始比列不一致,它会出现扭曲.所以建议不要使用css设置canvas宽度

## 替换内容
+ 某些较老的浏览器,(尤其是IE9之前的IE浏览器)或者浏览器不支持HTML元素`<canvas>`,在这些浏览器上你总是能看到替换内容
+ 支持canvas的浏览器只会渲染canvas的内容,而忽略其中的替换内容,不支持canvas的浏览器则会直接渲染替换内容,另外注意一点.canvas的结束标签不可省略,与 `<img>` 元素不同`<canvas>`元素需要结束标签(`</canvas>`)。如果结束标签不存在，则文档的其余部分会被认为是替代内容，将不会显示出来。

##渲染上下文
+ `<canvas>`会创建一个固定大小的画布,会公开一个或者多个渲染上下文(画笔)使用渲染上下文来绘制和处理要展示的内容.
```
var canvas = document.getElementById('tutorial');
//获得 2d 上下文对象
var ctx = canvas.getContext('2d');
```
## 绘制形状
+ 栅格(grid)和坐标空间
+ canvas元素默认被网格覆盖.通常来说网格中的一单元,相当于canvas元素中的一像素,栅格起点为左上角,坐标为0,0所有元素的位置都相对于原点来定位.,
1. fillRect(x, y, width, height)：绘制一个填充的矩形。
2. strokeRect(x, y, width, height)：绘制一个矩形的边框。
3. clearRect(x, y, widh, height)：清除指定的矩形区域，然后这块区域会变的完全透明。

## 绘制路径(path)
+ 图形的基本元素是路径
+ 路径是通过不同颜色和宽度的线段或曲线相连而形成的不同形状的点的集合
+ 一个路径,甚至一个子路径都是闭合的
+ 使用路径绘制图形需要一些额外的步骤.
1. 创建路径起始点
2. 调用绘制方法去绘制路径
3. 把路径封闭
4. 一旦路径形成,通过描边或填充路径区域来渲染路径

+ 需要用到的方法
1. beginPath(),新建一条路径,一旦路径创建成功,图形绘制命令被指向到路径上生成路径
2. moveTo(x,y) 把画笔移动到指定的坐标(X,Y)相当于设置路径的起始点坐标
3. closePath() 闭合路径之后,图形绘制命令又重新指向到上下文中.
4. stroke() 通过线条来绘制图形轮廓.
5. fill() 通过填充路径的内容区域来生成实心的图形;

## Transparency(透明度)
+ globalAlpha 属性在需要绘制大量拥有相同透明度的图形时候相当高效。不过，我认为使用rgba()设置透明度更加好一些。

## line style
1. 线宽:lineWidth
+ 只能是正值,默认为1.0
+ 起始点与终点的连线为中心,上下各占一半.

2. lineCap =type 
+ 线条末端样式
+ 共有三个值:
1. button:线段末端以方形结束
2. round:线段末端以圆形结束
3. square:线段末端以方形结束,但是增加了一个宽度和线段相同,高度是线段厚度一半的矩形区域.

3. lineJoin = type
+ 同一个path内,设定线条与线条间结合处的样式
1. round 通过填充一个额外的，圆心在相连部分末端的扇形，绘制拐角的形状。 圆角的半径是线段的宽度。
2. bevel 在相连部分的末端填充一个额外的以三角形为底的区域， 每个部分都有各自独立的矩形拐角。
3. miter(默认) 通过延伸相连部分的外边缘，使其相交于一点，形成一个额外的菱形区域。

4. 虚线(dash)
+ 用setLineDash 方法和 lineDashOffset 属性来制定虚线样式。
+  setLineDash 方法接受一个数组，来指定线段与间隙的交替
```
ctx.setLineDash([20, 5]);  // [实线长度, 间隙长度]
```
+ lineDashOffset属性设置起始偏移量。

## 绘制文本
+ canvas 提供了两种方法来渲染文本:
1. fillText(text, x, y [, maxWidth]) 在指定的 (x,y) 位置填充指定的文本，绘制的最大宽度是可选的。
2. strokeText(text, x, y [, maxWidth]) 在指定的 (x,y) 位置绘制文本边框，绘制的最大宽度是可选的。

## 状态的保存和恢复
+ Saving and restoring state 是绘制复杂图形时必不可少的操作.
+ save 和 restore 方法是用来保存和恢复 canvas 状态的，都没有参数
1. 关于 save() ：Canvas状态存储在栈中，每当save()方法被调用后，当前的状态就被推送到栈中保存。

## 变形
+ translate(x, y)
+ 用来移动 canvas 的原点到指定的位置

## 缩放
+ sacle我们用它来增减图形在 canvas 中的像素数目，对形状，位图进行缩小或者放大。
+ scale方法接受两个参数。x,y 分别是横轴和纵轴的缩放因子，它们都必须是正值。值比 1.0 小表示缩 小，比 1.0 大则表示放大，值为 1.0 时什么效果都没有。

## 合成
+ globalCompositeOperation(全局合成操作)
+ type
    1. source-over(默认)新图像会覆盖原有图像
    2. source-in仅会出现新图像与原图像重叠的部分,其他区域都变成透明的(包括其他的老图像区域也回变成透明)
    3.  source-out(仅仅显示新图像与老图像没有重叠的部分,其余部分完全透明)(老图像也不显示).
    4.  source-atop新图像仅仅显示与老图像重叠区域,老图像仍然可以显示.
    5.  destination-over(新图像出现在老图像下面)
    6.  destination-in(只显示新图像与老图像重叠的老图像被显示,其他区域全被透明.
    7.  destination-out(仅仅显示老图像与新图像没有重叠的老图像的部分)
    8.  destination-atop(老图像仅仅显示重叠部分,新图像会显示在老图像的下面)
    9.  lighter 新老图像都显示,但是重叠区域的颜色做加处理
    10. darken保留重叠部分最黑的像素。(每个颜色位进行比较，得到最小的);
    11. lighten保证重叠部分最量的像素。(每个颜色位进行比较，得到最大的);
    12. xor重叠部分会变透明.
    13. copy只有新图像会被保留,其余的全部被清除.(边透明)
