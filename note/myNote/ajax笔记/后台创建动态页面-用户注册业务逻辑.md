## 通过后台 用户注册业务逻辑总结
1. 在首页需要创建一个按钮指向登录页面
   1. 在视口中创建一个登录页面
   2. 登录页面的提交方法应该是post类型,优点是一请求参数会包含在请求体中,不会在地址栏直接显示,相对安全.请求参数没有上限大小,没有缓存.
   3. 注意需要加上name属性,否则后台接收不到参数.
   4. 登录页面上还应该具有注册按钮.用来跳转到注册页面,注册用户.
   5. 表单的action(向何处发送表单数据)传入doLogin

2. 在后台页面中,需要创建一个路由(router),拦截/login请求,然后找到login.ejs模板引擎进行渲染,用第二个参数替换占位符.

3. 后台页面中,还需要配置一个/dologin用来拦截请求,注意这里发送请求的类型是post,后台也需要使用post进行拦截.
    1. 注意:post与get发送请求携带参数的方式是不同的,所以后台获取的方式也不同,post请求后台通过body来获取,get通过request;
    2. 后台先通过req.body来获取前台请求的数据.然后这里我们用js模拟,数据库中是否有数据,如果有则falg为false,并结束当前循环.
    3. 如果登录成功.需要考虑以下:
        1. 需要跳转到登录成功页面.还要抛弃之前req(请求的数据,防止刷新多次提交数据).
        2. 这里需要用到redirect重新定向,它可以抛弃之前的请求对象数据内容,并且修改地址栏.
        3. 这相当于在后台又发送了另一个路由里面,然后在进行渲染,这时地址同时发送变化.
        4. 登录成功后,其实最先考虑的是先将后台获取到数据保存在session中.(session一般用于判断用户是否登录/可以控制用户权限).

4. 在登录成功页面时,怎么才能知道刚才是谁登录了呢?
    1. 如果session长度大于0,代表登录成功,并且把session的值拿出来替换占位符.
    2. 如果没有session则视为非法访问.将页面跳转为登录页面.

5. 登录失败页面.直接跳转
    1. 还需要一个按钮跳回登录页面

6. 注册用户页面.在后台创建一个路由,拦截/reg请求,并找到引擎模板,第二个参数进行渲染.

7. 执行注册
    1. 执行注册,需要考虑相同的用户名不能被注册.
    2. 应该先从请求对象中获取到数据内容,并判断数据库中是否已经含有,如果存在则不允许被注册.
    3. 如果允许被注册,则使用push方法将数据存入数据库中,并且跳转到登录页面.
    4. 否则,表单数据将被清空,并重新定向到注册页面.使用res.redirect

8. 在成功登录页面中,应该还有一个退出登录按钮.
    1. 在后台页面中,同样需要拦截到/doLogout这个请求.
    2. 然后定向到首页
    3. 注意:并且需要将当前的session清空,否则你退出登录后,可以直接进入登录成功页面.不符合先向后台请求数据,然后后台发出响应的要求.

9. 注册页面需要判断输入的数据是否正确.当submit按钮被点击时候返回一个函数.使用正则进行判断,声明一个flag为false,当判断符合条件时,值为true.当不正确的时候,返回为false,最后将flag值返回.
