<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<link rel="stylesheet" href="style.css">
</head>
<body>
	
	<div class="header">
		<ul class="header-list">
			<li><a href="">小米商城</a></li>
			<div>|</div>
			<li><a href="">MUI</a></li>
			<div>|</div>
			<li><a href="">loT</a></li>
			<div>|</div>
			<li><a href="">金融</a></li>
			<div>|</div>
			<li><a href="">优品</a></li>
			<div>|</div>
			<li><a href="">小爱开放平台</a></li>
			<div>|</div>
			<li><a href="">政企服务</a></li>
			<div>|</div>
			<li><a href="">资质证照</a></li>
			<div>|</div>
			<li><a href="">协议规则</a></li>
			<div>|</div>
			<li><a href="">下载app</a></li>
			<div>|</div>
			<li><a href="">Select Region</a></li>
		<ul class="header-list2">
			<li><a href="">登录</a></li>
			<div>|</div>
			<li><a href="">注册</a></li>
			<div>|</div>
			<li><a href="">消息通知</a></li>
		</ul>
		
		</ul>
		<ul class="header-list3">
			<li>
				<a href="#">购物车(0)</a>
			</li>
		</ul>
	</div>

	
	<div class="top">
		<div class="top-logo">
			<a href="" class="logo1" ></a>
			<a href="" class="logo2"></a>
		</div>
		<ul class="top-nav">
				<li class="top-nav-item" id="li_1"><a href="#">小米手机</a></li>
				<li class="top-nav-item" id="li_2"><a href="#">红米</a></li>
				<li class="top-nav-item" id="li_3"><a href="#">电视</a></li>
				<li class="top-nav-item" id="li_4"><a href="#">笔记本</a></li>
				<li class="top-nav-item" id="li_5"><a href="#">家电</a></li>
				<li class="top-nav-item" id="li_6"><a href="#">新品</a></li>
				<li class="top-nav-item" id="li_7"><a href="#">路由器</a></li>
				<li class="top-nav-item" id="li_8"><a href="#">智能硬件</a></li>
				<li class="top-nav-item" id="li_9"><a href="#">服务</a></li>
				<li class="top-nav-item" id="li_10"><a href="#">社区</a></li>
		</ul>
		<div class="search-block">
				<input type="text" class="search-input">
				<a href="#" class="search-btn"></a>
			<div class="tips">
				<a href="#" class="tip-item">小米8</a>
				<a href="#" class="tip-item">小米MIX 2S</a>
			</div>
			<ul class="product-list">
				<li><a href="#"><span class="p-name">小米6x</span><span class="p-stock">约有1件</span></a></li>
				<li><a href="#"><span class="p-name">小米mix 2S</span><span class="p-stock">约有5件</span></a></li>
				<li><a href="#"><span class="p-name">黑鲨游戏机手机</span><span class="p-stock">约有1件</span></a></li>
				<li><a href="#"><span class="p-name">红米Note 5</span><span class="p-stock">约有15件</a></li>
				<li><a href="#"><span class="p-name">红米5A</span><span class="p-stock">约有5件</span></a></li>
				<li><a href="#"><span class="p-name">小米电视4C</span><span class="p-stock">约有5件</span></a></li>
				<li><a href="#"><span class="p-name">电视32英寸</span><span class="p-stock">约有3件</span></a></li>
				<li><a href="#"><span class="p-name">笔记本pro</span><span class="p-stock">约有15件</span></a></li>
				<li><a href="#"><span class="p-name">空气净化器</span><span class="p-stock">约有11件</span></a></li>
				<li><a href="#"><span class="p-name">净水器</span><span class="p-stock">约有8件</span></a></li>
			</ul>
			
		</div>
	</div>
	<div class="nav-item-sub-list">
		<ul class="nav-data-list">
			
		</ul>
					
	</div>

	<div class="banner">
			<div class="aside-list">
				<ul class="aside">
					<li><a href="#">手机电话卡</a></li>
					<li><a href="#">电视盒子</a></li>
					<li><a href="#">笔记本 平板</a></li>
					<li><a href="#">家电 插线板</a></li>
					<li><a href="#">出行 穿戴</a></li>
					<li><a href="#">智能 路由器</a></a></li>
					<li><a href="#">电源 配件</a></li>
					<li><a href="#">健康 儿童</a></li>
					<li><a href="#">耳机 音箱</a></li>
					<li><a href="#">生活 箱包</a></li>
				</ul>
			</div>
				<a class="arr arr-left" href="#">&lt;</a>
				<a class="arr arr-right" href="#">&gt;</a>
				<ul class="dott">
					<li><a href="javascript:;"></a></li>
					<li><a href="javascript:;"></a></li>
					<li><a href="javascript:;"></a></li>
					<li><a href="javascript:;"></a></li>
					<li><a href="javascript:;"></a></li>
					<li><a href="javascript:;"></a></li>
				</ul>
	</div>
	<script src="utils/common.js"></script>
	<script src="data/mi_data.js"></script>
	<script>
	var searchBlock = document.getElementsByClassName('search-block')[0];
		//搜索框
	var searchInput = document.getElementsByClassName('search-input')[0];
		//搜索框下拉列表
	var productList = document.getElementsByClassName('product-list')[0];
		
													// 这里注意不要加[0]!!!
													// 获取所有li标签
	var topNavItems = document.getElementsByClassName('top-nav-item');

	var navItemSubList = document.getElementsByClassName('nav-item-sub-list')[0];
	// 生成当前hover对象
	var navDataList = document.getElementsByClassName('nav-data-list')[0];
	// 搜索框获取焦点
	
	searchInput.onfocus = function(){
			// active 这个样式就是开关
			addClassName(searchBlock,'active');
			// productList.style.display = 'block';
		}
		searchInput.onblur = function(){
			// productList.style.display = 'none';
			removeClassName(searchBlock,'active');
		}

	searchInput.onfocus = function(){
		addClassName(searchBlock,'active');
	}
	
	
		for(var i = 0 ; i < topNavItems.length ; i ++){
			
			// str = '';
			// 当进入一个事件时enter表示进入
			topNavItems[i].onmouseenter = function(){
				// console.log(this.id);   li_1
				// 计算出当前li对应的数据对象的数组下标
				var index = this.id.split('_')[1]-1;
				// console.log(miData[id]);
				// 找到id属性的下标也就是li标签的下标这是一个方法 要牢记!1!

				// 3 > 0 1 2
				// 因为只有miData.length>li标签的下标 li才有data可以传
				if(miData.length>index){
					//当前数据对象
					var currentData = miData[index];
					// 用获取到的数据动态生成html 插入目标对象
								// 当前目标对象	插入目标对象
 					buildHtml(currentData,navDataList);
				}else{

					console.log('no data...');
				}

				addClassName(navItemSubList,'active');

				// navItemSubList.style.display = 'block';
			}
			
			topNavItems[i].onmouseleave = function(){
				removeClassName(navItemSubList,'active');
				// navItemSubList.style.display = 'none';
			}
		}


	


	
		
		// 创建一个函数来封装构建HTML的方法
		// 需要两个参数一个就是获取的数据,第二个就是插入的目标.
		// 数据 插入目


		function buildHtml(data,targetEl){
			var str = '';
			for(var i = 0 ; i < data.length ; i ++){
				var newHtml = data[i].new?('<span class="new">新品</span>'):'<span class="new active"></span> ';
				str += '<li class="pro-item">'+newHtml+'<a href="#" class="img-link">'
					+'<img class="img" src="'+data[i].img+'"/></a>'
					+'<p class="name">'+data[i].name+'</p> <p class="price">'+data[i].price+'</p></li>';
			}
			// 重新赋值
			targetEl.innerHTML = str;

		}


	
	
		
	
	



		
	
	</script>
</body>
</html>